<!DOCTYPE html> 
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>LiveWorks</title>
  <link rel="stylesheet" href="reg.css"/>
</head>
<body style="background-color: #121212; color: white; font-family: sans-serif;">
  <div id="includedContent"></div>

  <h2 class="center">‚úîÔ∏è Congratulations! You completed LiveWorks Registration! Now you can distribute games!</h2>
  <br><br>

  <p class="center">Full Name: <span id="name_c"></span></p>
  <p class="center">Address: <span id="addr_c"></span></p>
  <p class="center">ZIP: <span id="zip_c"></span></p>
  <p class="center">License Accepted: <span id="lic_c"></span></p>
  <p class="center">Country: <span id="country_c"></span></p>
  <p class="center">Business Deal: <span id="bdeal_c"></span></p>
  <p class="center">Company: <span id="comp_c"></span></p>
  <p class="center">Bank: <span id="bank_c"></span></p>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      // –ó–∞–≥—Ä—É–∂–∞–µ–º –≤–Ω–µ—à–Ω–∏–π HTML-—Ñ–∞–π–ª (–µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å)
      fetch("styles.html")
        .then(response => response.text())
        .then(data => {
          document.getElementById("includedContent").innerHTML = data;
        });

      const params = new URLSearchParams(location.search);
      const encoded = params.get("CurrentState");

      if (!encoded) {
        alert("‚ùå Missing registration data. Please start from Step 1.");
        return;
      }

      try {
        const decodedJson = atob(decodeURIComponent(encoded)); // üî• decode base64 + URI
        const state = JSON.parse(decodedJson);

        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –≤ DOM
        document.getElementById("name_c").textContent = state.name || "";
        document.getElementById("addr_c").textContent = state.address || "";
        document.getElementById("zip_c").textContent = state.zip || "";
        document.getElementById("lic_c").textContent = state.license ? "Yes" : "No";
        document.getElementById("country_c").textContent = state.county || "";
        document.getElementById("bdeal_c").textContent = state.buisness_deal || "";
        document.getElementById("comp_c").textContent = state.company || "";
        document.getElementById("bank_c").textContent = state.bank || "";

        console.log("‚úÖ Final state received:", state);
      } catch (e) {
        alert("‚ùå Data recognition failed. Please return to the first page.\n\nError: " + e.message);
      }
    });
  </script>
</body>
</html>
